<!DOCTYPE html>
<html>
<head>
  <title>Acessar imagens no Firebase Storage</title>
</head>
<body>
  <h1>Imagens no Firebase Storage</h1>

  <script type="module" src="https://www.gstatic.com/firebasejs/9.2.0/firebase-app.js"></script>
  <script type="module" src="https://www.gstatic.com/firebasejs/9.2.0/firebase-storage.js"></script>

  <script type="module">
 import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.2.0/firebase-app.js';
  import { getStorage, ref, listAll, getDownloadURL } from 'https://www.gstatic.com/firebasejs/9.2.0/firebase-storage.js';

  // Configure your Firebase app (replace with your project information)
  const firebaseConfig = {
    apiKey: "AIzaSyC-sTNLSRresl1l8dEdHUap3MDnMa8olWg",
      authDomain: "tcc-01-14792.firebaseapp.com",
      databaseURL: "https://tcc-01-14792-default-rtdb.firebaseio.com",
      projectId: "tcc-01-14792",
      storageBucket: "tcc-01-14792.appspot.com",
      messagingSenderId: "432967975257",
      appId: "1:432967975257:web:2c48a5e7df9e3d3d5d8c48",
  };

  const app = initializeApp(firebaseConfig);

  // Reference to the 'images' folder in Firebase Storage
  const storage = getStorage(app);
  const imagesRef = ref(storage, 'images');

  // List the files in the 'images' folder and display their URLs
  const imageList = document.getElementById('imageList');

  listAll(imagesRef)
    .then((result) => {
      result.items.forEach((imageRef) => {
        // Get the image URL
        getDownloadURL(imageRef)
          .then((url) => {
            if (imageRef){
                console.log(imageRef)
            }
            const image = document.createElement('img');
            image.src = url;
            image.style.width = "250px"
            image.style.height = "250px"
            image.alt = image.name
            image.style.margim = "50px"
            document.body.appendChild(image);
            const listItem = document.createElement('li');
            listItem.innerHTML = `<a href="${url}" target="_blank">${imageRef.name}</a>`;
            imageList.appendChild(listItem);
          })
          .catch((error) => {
            console.error('Error getting image URL:', error);
          });
      });
    })
    .catch((error) => {
      console.error('Error listing files in "images" folder:', error);
    });
  </script>
</body>
</html>
